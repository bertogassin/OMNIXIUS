# OMNIXIUS — Предложения по слоям и параметрам

Пошаговый обзор: что уже хорошо, что можно усилить. **Уровень документа:** живой приоритизированный бэклог; статусы обновляются по мере реализации. Выбирай пункты по приоритету.

---

## 1. Безопасность (Security)

| Параметр | Сейчас | Предложение |
|----------|--------|-------------|
| **Пароли** | Argon2id + bcrypt при логине | ✅ Ок. Опционально: проверка утёкших паролей (haveibeenpwned) при регистрации. |
| **Токены** | Dilithium3, ключи из env | ✅ Ок. В проде обязательно задать `DILITHIUM_PUBLIC_KEY` / `DILITHIUM_PRIVATE_KEY`. |
| **HTTPS** | Не в коде | В проде: реверс-прокси (nginx/Cloudflare) с TLS; редирект HTTP→HTTPS. |
| **CORS** | Из env `ALLOWED_ORIGINS` | В проде задать явный список origin, без `*`. |
| **Заголовки** | Нет X-Frame-Options и т.п. | Добавить middleware: `X-Content-Type-Options: nosniff`, `X-Frame-Options: DENY` (или SAMEORIGIN), при HTTPS — `Strict-Transport-Security`. |
| **Сессия** | Токен в localStorage/sessionStorage | Ок. Опционально: короткий срок жизни токена + refresh (если нужна «сессия до N минут»). |

---

## 2. UX и фронтенд (App + Site)

| Параметр | Сейчас | Предложение |
|----------|--------|-------------|
| **Загрузка** | Loading… на Marketplace, Orders, Dashboard | ✅ Есть. Можно добавить скелетоны (карточки-заглушки) вместо текста. |
| **Пустые состояния** | No results, No orders | ✅ Есть. Добавить такие же на Mail (пустой inbox), Conversation. |
| **Ошибки сети** | "Failed to load" | Показать кнопку «Повторить»; для логина/регистрации — напоминание про Set API URL. |
| **Мобильное меню** | menu-toggle есть в site | Проверить, что в app на мобиле навбар не ломается; при необходимости — бургер-меню в app. |
| **Доступность (a11y)** | Базово | Добавить `aria-label` у кнопок (показать пароль, выйти), `role="alert"` у блока ошибки, фокус на первом поле в формах. |
| **i18n** | EN, RU, FR в app | Расширить на все страницы app (marketplace, mail, product, profile-edit). Сейчас часть строк без data-i18n. |
| **Сайт (лендинг)** | Статика, 4 платформы | Опционально: одна страница «Terms of Service» (кратко) со ссылкой из регистрации; обновить год в footer (2025→2026). |

---

## 3. Backend / API

| Параметр | Сейчас | Предложение |
|----------|--------|-------------|
| **Сервисный слой** | Auth, products, orders, conversations | ✅ Готово. |
| **Валидация** | Длины, обязательные поля | Добавить явную валидацию формата email (regex или библиотека); опционально — отдельный пакет validate в backend-go. |
| **Ответы об ошибках** | `{"error": "..."}` | Оставить. Опционально: коды ошибок (например `ERR_EMAIL_EXISTS`) для фронта. |
| **Версионирование API** | Нет | Для будущего: префикс `/api/v1/` и документировать. Пока можно не менять. |
| **Health check** | ✅ Есть | `GET /health` (200 + проверка БД) реализован в backend-go; для Docker/K8s и мониторинга. |

---

## 4. Данные и БД

| Параметр | Сейчас | Предложение |
|----------|--------|-------------|
| **Схема и миграции** | schema.sql + migrations/ | ✅ Ок. Новые изменения — только через файлы 003_*.sql и т.д. |
| **Индексы** | products, orders, messages | ✅ Ок. При росте: индекс по `messages(created_at)` если будут запросы «последние N сообщений». |
| **Бэкапы** | Нет в репо | Документировать: как делать бэкап SQLite (копия файла или `sqlite3 .backup`); расписание в cron или у хостера. |
| **Конфиденциальность** | DELETE /users/me, PRIVACY.md | Опционально: мягкое удаление (deleted_at) с очисткой PII через N дней; сейчас — жёсткое удаление, это ок для MVP. |

---

## 5. DevOps и продакшен

| Параметр | Сейчас | Предложение |
|----------|--------|-------------|
| **CI** | GitHub Actions: build + test | ✅ Ок. Опционально: шаг `go vet`, `staticcheck`; деплой бэкенда (Railway/Render) по тегу или ветке. |
| **Docker** | Dockerfile backend-go | ✅ Ок. В README добавить пример: `docker build -t omnixius-api .` и `docker run` с `-e DB_PATH`, `-v` для данных. |
| **Переменные окружения** | config.go, env | Собрать в одном месте (README backend-go или .env.example): PORT, DB_PATH, ALLOWED_ORIGINS, DILITHIUM_*, ARGON2_MEMORY. |
| **Мониторинг** | Нет | Опционально: метрики (Prometheus) или просто health + лог в внешний сервис (Logtail и т.п.). |
| **Кэш** | Нет | При росте: Redis для сессий/лимитов или кэш списка категорий; пока не обязательно. |

---

## 6. Документация и контракт API

| Параметр | Сейчас | Предложение |
|----------|--------|-------------|
| **README** | Site + GitHub Pages | ✅ Ок. В backend-go: список всех env и пример .env.example. |
| **Описание API** | PLATFORM.md, общее | Отдельный API.md или OpenAPI (Swagger): список endpoints, методы, тела запросов/ответов, коды ошибок. Удобно для фронта и мобилок. |
| **ARCHITECTURE / ECOSYSTEM** | Есть | ✅ Ок. Обновлять при появлении новых направлений. |

---

## 7. Качество кода и тесты

| Параметр | Сейчас | Предложение |
|----------|--------|-------------|
| **Тесты** | pqc, auth (login 401, register 201), product 404 | Добавить: тест создания заказа (OrderCreate), тест отправки сообщения (MessageSend или handler); опционально — тест полного флоу (register → login → product list). |
| **Линтеры** | Нет в CI | В CI: `go vet ./...`; опционально `staticcheck` или `golangci-lint`. |
| **Зависимости** | go.mod, go.sum | Раз в квартал: `go get -u ./...` и прогнать тесты; или Dependabot (GitHub). |

---

## 8. Продукт и фичи

| Параметр | Сейчас | Предложение |
|----------|--------|-------------|
| **Маркетплейс** | Список, фильтры, карточка, заказ | Уведомления (например «новое сообщение в переписке») — через polling или позже WebSocket/SSE. |
| **Почта** | Список диалогов, сообщения, прочитано | Счётчик непрочитанных в навбаре; автообновление списка каждые N сек (опционально). |
| **Профиль** | Имя, аватар, заказы | Опционально: «Изменить пароль» (отдельный endpoint уже есть reset; можно добавить «смена пароля при известном текущем»). |
| **Поиск** | По title/description, категория, цена | Опционально: сортировка (по дате, цене); сохранённые фильтры в localStorage. |

---

## Приоритеты (что даст максимум при минимуме усилий)

1. **Быстро:** Health check (`GET /health`), security headers (X-Content-Type-Options, X-Frame-Options), .env.example в backend-go.
2. **Средне:** API.md или OpenAPI для endpoints; ещё 1–2 теста (order create, message send); расширить i18n на все строки в app.
3. **Когда масштабируешь:** Redis/кэш, бэкапы по расписанию, мониторинг, смена пароля в профиле.

Если скажешь, с какого слоя начать (безопасность, UX, API, тесты и т.д.) — могу расписать конкретные шаги или сразу внести правки в код.
